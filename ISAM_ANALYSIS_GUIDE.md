# C-ISAM íŒŒì¼ êµ¬ì¡° ë¶„ì„ ê°€ì´ë“œ

## ğŸ“‹ ì§ˆë¬¸: .datì™€ .idx íŒŒì¼ë§Œìœ¼ë¡œ í…Œì´ë¸” êµ¬ì¡°ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆë‚˜?

### âœ… ë‹µë³€: **YES, ê°€ëŠ¥í•˜ì§€ë§Œ ì œí•œì ì…ë‹ˆë‹¤.**

---

## 1ï¸âƒ£ ê¸°ë³¸ ê°œë…

### C-ISAM íŒŒì¼ êµ¬ì„±
```
customers.isam
â”œâ”€â”€ customers.isam.dat  (ë°ì´í„° íŒŒì¼)
â”œâ”€â”€ customers.isam.idx  (ì¸ë±ìŠ¤ íŒŒì¼)
â””â”€â”€ customers.isam.001  (ì˜¤ë²„í”Œë¡œìš° íŒŒì¼, ì„ íƒì‚¬í•­)
```

### ë ˆì½”ë“œ ì €ì¥ í˜•ì‹
- **ê³ ì • ê¸¸ì´ ë ˆì½”ë“œ(Fixed-Length Record)**: ëª¨ë“  ë ˆì½”ë“œê°€ ê°™ì€ í¬ê¸°
- **ë ˆì½”ë“œ êµ¬ë¶„ì**: `0x0d 0a` (\r\n)ë¡œ ê° ë ˆì½”ë“œ êµ¬ë¶„
- **í•„ë“œ í¬ë§·**: 
  - ì •ìˆ˜: Big-Endian (4ë°”ì´íŠ¸)
  - ë¬¸ìì—´: ê³µë°± íŒ¨ë”©ëœ ê³ ì • ê¸¸ì´

---

## 2ï¸âƒ£ .DAT íŒŒì¼ ë¶„ì„ ë°©ë²•

### ë°©ë²• 1: íŒŒì¼ í¬ê¸°ë¡œ êµ¬ì¡° íŒŒì•…

```bash
# íŒŒì¼ í¬ê¸° í™•ì¸
ls -lh customers.isam.dat
# ê²°ê³¼: 186,368 ë°”ì´íŠ¸ (1000 ë ˆì½”ë“œ Ã— 186 ë°”ì´íŠ¸)

# ë ˆì½”ë“œ ê°œìˆ˜ ê³„ì‚°
ë ˆì½”ë“œ ê°œìˆ˜ = íŒŒì¼ í¬ê¸° Ã· í‰ê·  ë ˆì½”ë“œ í¬ê¸°
```

### ë°©ë²• 2: í—¥ìŠ¤ ë¤í”„ë¡œ êµ¬ì¡° í™•ì¸

```bash
hexdump -C customers.isam.dat | head -50
```

**íŒ¨í„´ ì‹ë³„:**
- `0d 0a`: ë ˆì½”ë“œ êµ¬ë¶„ì (ê° 186ë°”ì´íŠ¸ë§ˆë‹¤ ë°˜ë³µ)
- `00 00 00 01`: Big-Endian ì •ìˆ˜ (ID = 1)
- `43 75 73 74...`: ASCII í…ìŠ¤íŠ¸ (Customer_0001)

### ë°©ë²• 3: ìë™ ë¶„ì„ (Python)

```bash
python3 analyze_isam.py customers.isam.dat customers.isam.idx
```

**ì¶œë ¥ ê²°ê³¼:**
```
DAT íŒŒì¼ ë¶„ì„
- íŒŒì¼ í¬ê¸°: 186,368 ë°”ì´íŠ¸
- ë ˆì½”ë“œ í¬ê¸°: 186 ë°”ì´íŠ¸
- ë ˆì½”ë“œ ê°œìˆ˜: 1,000
- í•„ë“œ: ID(4) + Name(50) + Email(100) + Phone(20) + Date(11) + Separator(2)
```

---

## 3ï¸âƒ£ .IDX íŒŒì¼ ë¶„ì„ ë°©ë²•

### ì¸ë±ìŠ¤ íŒŒì¼ í—¤ë” êµ¬ì¡°

```
ë°”ì´íŠ¸ 0-1:   ë§¤ì§ ë„˜ë²„     (0xfe53 = ISAM signature)
ë°”ì´íŠ¸ 2:     ë²„ì „         (2 = version 2)
ë°”ì´íŠ¸ 3-6:   (ì˜ˆì•½)
ë°”ì´íŠ¸ 4:     í‚¤ ì˜¤í”„ì…‹     (0 = ì²« í•„ë“œë¶€í„°)
ë°”ì´íŠ¸ 5:     í‚¤ ê¸¸ì´       (4 = 4ë°”ì´íŠ¸)
ë°”ì´íŠ¸ 6:     í‚¤ íƒ€ì…       (3 = LONGTYPE, 1 = CHARTYPE)
ë°”ì´íŠ¸ 7:     í”Œë˜ê·¸        (0xff = ISDUPS ì¤‘ë³µí—ˆìš©)
```

### ì¸ë±ìŠ¤ íŒŒì¼ í—¥ìŠ¤ ë¤í”„

```bash
hexdump -C customers.isam.idx | head -20
```

### ë¶„ì„ ê²°ê³¼

```
ë§¤ì§ ë„˜ë²„: 0xfe53 (C-ISAM íŒŒì¼ í™•ì¸)
ë²„ì „: 2
í‚¤ í•„ë“œ ì •ë³´:
  - ì˜¤í”„ì…‹: 0 (ì²« ë²ˆì§¸ í•„ë“œ)
  - ê¸¸ì´: 4 ë°”ì´íŠ¸
  - íƒ€ì…: 3 (LONGTYPE = ì •ìˆ˜)
  - í”Œë˜ê·¸: 0xff (ISDUPS = ì¤‘ë³µ í‚¤ í—ˆìš©)
```

---

## 4ï¸âƒ£ ì‹¤ì œ êµ¬ì¡° íŒŒì•… ì˜ˆì‹œ

### ì›ë³¸ C ì½”ë“œ
```c
struct customer {
    int customer_id;           // 4 bytes, offset 0
    char name[50];             // 50 bytes, offset 4
    char email[100];           // 100 bytes, offset 54
    char phone[20];            // 20 bytes, offset 154
    char registration_date[11];// 11 bytes, offset 174
};  // Total: 185 bytes (+ 2 bytes for \r\n = 187 bytes on disk)
```

### íŒŒì¼ì—ì„œ ì½ì€ ë°ì´í„° (ì²« ë ˆì½”ë“œ)

```
Offset 0-3:   00 00 00 01           â†’ ID = 1
Offset 4-53:  43 75 73 74 6f 6d ... â†’ "Customer_0001" (50 bytes)
Offset 54-153: 63 75 73 74 6f 6d ... â†’ "customer1@..." (100 bytes)
Offset 154-173: 30 31 30 2d 32 36 ... â†’ "010-2637-3125" (20 bytes)
Offset 174-184: 32 30 32 35 2d 30 ... â†’ "2025-03-31" (11 bytes)
Offset 185-186: 0d 0a                â†’ "\r\n" (ë ˆì½”ë“œ êµ¬ë¶„ì)
```

---

## 5ï¸âƒ£ ìë™ ë¶„ì„ ë„êµ¬ ì‚¬ìš©ë²•

### ì‚¬ì „ ì¤€ë¹„

```bash
# ë¶„ì„ ë„êµ¬ ë‹¤ìš´ë¡œë“œ/ìƒì„±
cd /tmp
cp /home/informix/CISAM/analyze_isam.py .
```

### ì‹¤í–‰

```bash
python3 analyze_isam.py customers.isam.dat customers.isam.idx
```

### ì¶œë ¥ ì˜ˆì‹œ

```
================================================================================
DAT íŒŒì¼ ë¶„ì„
================================================================================

íŒŒì¼ í¬ê¸°: 186,368 ë°”ì´íŠ¸
ë ˆì½”ë“œ í¬ê¸°: 186 ë°”ì´íŠ¸
ë ˆì½”ë“œ ê°œìˆ˜: 1,000

ì²« 3ê°œ ë ˆì½”ë“œ ë¶„ì„:
[ë ˆì½”ë“œ 1]
  ID: 1
  Name: Customer_0001
  Email: customer1@example.com
  Phone: 010-2637-3125
  Date: 2025-03-31

[ë ˆì½”ë“œ 2]
  ID: 2
  Name: Customer_0002
  Email: customer2@example.com
  Phone: 010-8655-7911
  Date: 2025-01-01

================================================================================
IDX íŒŒì¼ ë¶„ì„
================================================================================

ë§¤ì§ ë„˜ë²„: 0xfe53
í‚¤ í•„ë“œ ì •ë³´:
  - ì˜¤í”„ì…‹: 0
  - ê¸¸ì´: 4 ë°”ì´íŠ¸
  - íƒ€ì…: 3 (LONGTYPE)

================================================================================
ì¶”ë¡ ëœ C êµ¬ì¡°ì²´ ì •ì˜
================================================================================

struct record {
    int id;              // Offset 0, 4 bytes
    char name[50];       // Offset 4, 50 bytes
    char email[100];     // Offset 54, 100 bytes
    char phone[20];      // Offset 154, 20 bytes
    char date[11];       // Offset 174, 11 bytes
};
```

---

## 6ï¸âƒ£ íŒŒì•… ê°€ëŠ¥ vs ë¶ˆê°€ëŠ¥

### âœ… íŒŒì•… ê°€ëŠ¥í•œ ì •ë³´
- ê° í•„ë“œì˜ ë°”ì´íŠ¸ ì˜¤í”„ì…‹(Offset)
- í•„ë“œ ê¸¸ì´ (ëŒ€ëµì ìœ¼ë¡œ)
- ë°ì´í„° íƒ€ì… (ì •ìˆ˜ vs ë¬¸ìì—´)
- ë ˆì½”ë“œ í¬ê¸°
- ë ˆì½”ë“œ ê°œìˆ˜
- ì‹¤ì œ ë°ì´í„° ë‚´ìš©
- ê¸°ë³¸ í‚¤ ì •ë³´
- ì¸ë±ìŠ¤ êµ¬ì¡°

### âŒ íŒŒì•… ì–´ë ¤ìš´ ì •ë³´
- **ì •í™•í•œ í•„ë“œëª…** (êµ¬ì¡°ì²´ì—ì„œ ì‚¬ìš©í•œ ë³€ìˆ˜ëª…)
- í•„ë“œì˜ ì˜ë¯¸/ëª©ì 
- ìˆ¨ê²¨ì§„ í•„ë“œë‚˜ í”Œë˜ê·¸
- ë³´ì¡° ì¸ë±ìŠ¤ ì •ë³´
- ë°ì´í„° ìœ íš¨ì„± ê·œì¹™ (constraints)
- í•„ë“œ ê°’ì˜ ë²”ìœ„ ì œí•œ

---

## 7ï¸âƒ£ ì‹¤ì „ íŒ

### 1. ìƒˆë¡œìš´ ISAM íŒŒì¼ ë¶„ì„í•  ë•Œ
```bash
# Step 1: íŒŒì¼ í¬ê¸° í™•ì¸
ls -lh *.isam.dat

# Step 2: í—¥ìŠ¤ ë¤í”„ë¡œ íŒ¨í„´ íŒŒì•…
hexdump -C *.isam.dat | head -100

# Step 3: ë ˆì½”ë“œ êµ¬ë¶„ì ì°¾ê¸° (0d 0a)
hexdump -C *.isam.dat | grep "0d 0a"

# Step 4: IDX íŒŒì¼ í—¤ë” ë¶„ì„
hexdump -C *.isam.idx | head -5

# Step 5: Python ìë™ ë¶„ì„
python3 analyze_isam.py *.isam.dat *.isam.idx
```

### 2. ë³µì¡í•œ êµ¬ì¡° ë¶„ì„ (ì„ íƒì‚¬í•­)

```bash
# ë¬¸ìì—´ ê¸°ë°˜ í•„í„°ë§
strings customers.isam.dat | head -100

# ë°”ì´ë„ˆë¦¬ íŒŒì¼ í¬ê¸° ë¹„êµ
stat customers.isam.dat customers.isam.idx
```

---

## 8ï¸âƒ£ ê²°ë¡ 

| í•­ëª© | ê°€ëŠ¥ ì—¬ë¶€ | ë‚œì´ë„ | ë„êµ¬ |
|------|---------|--------|------|
| ë ˆì½”ë“œ í¬ê¸° íŒŒì•… | âœ… ê°€ëŠ¥ | ë‚®ìŒ | ls, hexdump |
| í•„ë“œ ìˆ˜ íŒŒì•… | âœ… ê°€ëŠ¥ | ì¤‘ê°„ | hexdump + ë¶„ì„ |
| ê¸°ë³¸ êµ¬ì¡° íŒŒì•… | âœ… ê°€ëŠ¥ | ì¤‘ê°„ | hexdump, Python |
| ì •í™•í•œ í•„ë“œëª… | âŒ ë¶ˆê°€ëŠ¥ | ë†’ìŒ | ì›ë³¸ ì½”ë“œ í•„ìš” |
| ë³µìˆ˜ ì¸ë±ìŠ¤ ë¶„ì„ | âš ï¸  ë¶€ë¶„ | ë†’ìŒ | ì‹¬í™” ë¶„ì„ í•„ìš” |

**ê²°ë¡ : ê¸°ë³¸ êµ¬ì¡°ëŠ” ì¶©ë¶„íˆ íŒŒì•… ê°€ëŠ¥í•˜ë©°, ì •í™•í•œ í•„ë“œëª…ë§Œ ì›ë³¸ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì°¸ê³ í•˜ë©´ ë©ë‹ˆë‹¤.**

